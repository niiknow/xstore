{
  "src/index.coffee": {
    "id": "src/index.coffee",
    "type": "js",
    "mtime": 1429417909000,
    "src": "(function() {\n  (function(win) {\n    var Deferred, cacheBust, createPromise, deferredObject, delay, doc, handleMessageEvent, hash, iframe, load, onMessage, proxy, proxyPage, proxyWin, randomHash, storageKey, usePostMessage, xstore;\n    doc = win.document;\n    load = require('load-iframe');\n    proxy = require('./proxy.coffee');\n    proxyPage = 'http://niiknow.github.io/xstore/xstore.html';\n    storageKey = 'xstore';\n    deferredObject = {};\n    iframe = void 0;\n    proxyWin = void 0;\n    usePostMessage = win.postMessage != null;\n    cacheBust = 0;\n    hash = void 0;\n    delay = 333;\n\n    /**\n     * defer/promise class\n    #\n     */\n    Deferred = (function() {\n      function Deferred() {}\n\n      Deferred.prototype.callbacks = [];\n\n      Deferred.prototype.errorbacks = [];\n\n      Deferred.prototype.promise = function(func) {\n        var self;\n        self = this;\n        if (func) {\n          func(self.resolve, self.reject);\n        }\n        return self;\n      };\n\n      Deferred.prototype.then = function(callback, errorback) {\n        var self;\n        self = this;\n        if (errorback) {\n          self.errorbacks[self.callbacks.length] = errorback;\n        }\n        self.callbacks.push(callback);\n        return self;\n      };\n\n      Deferred.prototype.resolve = function(data) {\n        var e, i, l, self;\n        self = this;\n        i = 0;\n        l = self.callbacks.length;\n        i;\n        while (i < l) {\n          try {\n            data = self.callbacks[i](data);\n          } catch (_error) {\n            e = _error;\n            if (self.errorbacks[i]) {\n              self.errorbacks[i](e);\n            } else {\n              throw new Error(e);\n            }\n          }\n          i += 1;\n        }\n        return self;\n      };\n\n      Deferred.prototype.reject = function(e) {\n        var self;\n        self = this;\n        if (self.errorbacks.length) {\n          self.errorbacks[self.errorbacks.length](e);\n        } else {\n          throw new Error(e);\n        }\n      };\n\n      return Deferred;\n\n    })();\n    onMessage = function(fn) {\n      if (doc.addEventListener) {\n        return doc.addEventListener(\"message\", fn);\n      } else {\n        return doc.attachEvent(\"onmessage\", fn);\n      }\n    };\n    randomHash = function() {\n      var rh;\n      rh = Math.random().toString(36).substr(2);\n      return \"xstore-\" + rh;\n    };\n    createPromise = function(event, item) {\n      return function(resolve, reject) {\n        var d, deferredHash;\n        deferredHash = randomHash();\n        d = [0, deferredHash, event, item.k, item.v];\n        deferredObject[deferredHash] = {\n          resolve: resolve,\n          reject: reject\n        };\n        if (usePostMessage) {\n          proxyWin.postMessage(JSON.stringify(d), '*');\n        } else {\n          if (iframe !== null) {\n            cacheBust += 1;\n            d[0] = +(new Date) + cacheBust;\n            hash = '#' + JSON.stringify(d);\n            if (iframe.src) {\n              iframe.src = \"\" + proxyPage + hash;\n            } else if ((iframe.contentWindow != null) && (iframe.contentWindow.location != null)) {\n              iframe.contentWindow.location = \"\" + proxyPage + hash;\n            } else {\n              iframe.setAttribute('src', \"\" + proxyPage + hash);\n            }\n          }\n        }\n      };\n    };\n    handleMessageEvent = function(e) {\n      var d, di, id;\n      d = e.data;\n      if (typeof d === \"string\") {\n        if (/^xstore-/.test(d)) {\n          d = d.split(\",\");\n        } else if (jsonEncode) {\n          try {\n            d = JSON.parse(d);\n          } catch (_error) {\n            return;\n          }\n        }\n      }\n      if (!(d instanceof Array)) {\n        return;\n      }\n      id = d[1];\n      if (!/^xstore-/.test(id)) {\n        return;\n      }\n      di = deferredObject[id];\n      if (di) {\n        if (/^error-/.test(d[2])) {\n          di.reject(d[2]);\n        } else {\n          di.reject(d[4]);\n        }\n        return delete deferredObject[id];\n      }\n    };\n\n    /**\n     * xstore class\n    #\n     */\n    xstore = (function() {\n      function xstore() {}\n\n      xstore.get = function(k) {\n        return (new Deferred).promise(createPromise('get', k));\n      };\n\n      xstore.set = function(k, v) {\n        return (new Deferred).promise(createPromise('set', {\n          'k': k\n        }, {\n          'v': v\n        }));\n      };\n\n      xstore.remove = function(k) {\n        return (new Deferred).promise(createPromise('remove', k));\n      };\n\n      xstore.clear = function() {\n        return (new Deferred).promise(createPromise('clear'));\n      };\n\n      xstore.init = function(options) {\n        if (options.isProxy) {\n          proxy.init;\n          return;\n        }\n        proxyPage = options.url || proxyPage;\n        if (win.location.protocol === 'https') {\n          proxyPage = proxyPage.replace('http:', 'https:');\n        }\n        return iframe = load(\"\" + proxyPage, (function(_this) {\n          return function() {\n            proxyWin = iframe.contentWindow;\n            if (!usePostMessage) {\n              hash = proxyWin.location.hash;\n              return setInterval((function() {\n                if (proxyWin.location.hash !== hash) {\n                  hash = proxyWin.location.hash;\n                  handleMessageEvent({\n                    origin: proxyDomain,\n                    data: hash.substr(1)\n                  });\n                }\n              }), delay);\n            } else {\n              return onMessage(handleMessageEvent);\n            }\n          };\n        })(this));\n      };\n\n      return xstore;\n\n    })();\n    return modules[\"export\"] = xstore;\n  })(window);\n\n}).call(this);\n",
    "deps": {
      "load-iframe": "components/segmentio-load-iframe@0.1.0/index.js",
      "./proxy.coffee": "src/proxy.coffee"
    },
    "entry": true
  },
  "components/segmentio-load-iframe@0.1.0/index.js": {
    "id": "components/segmentio-load-iframe@0.1.0/index.js",
    "type": "js",
    "mtime": 1423784071000,
    "src": "\n/**\n * Module dependencies.\n */\n\nvar onload = require('script-onload');\nvar tick = require('next-tick');\nvar type = require('type');\n\n/**\n * Expose `loadScript`.\n *\n * @param {Object} options\n * @param {Function} fn\n * @api public\n */\n\nmodule.exports = function loadIframe(options, fn){\n  if (!options) throw new Error('Cant load nothing...');\n\n  // Allow for the simplest case, just passing a `src` string.\n  if ('string' == type(options)) options = { src : options };\n\n  var https = document.location.protocol === 'https:' ||\n              document.location.protocol === 'chrome-extension:';\n\n  // If you use protocol relative URLs, third-party scripts like Google\n  // Analytics break when testing with `file:` so this fixes that.\n  if (options.src && options.src.indexOf('//') === 0) {\n    options.src = https ? 'https:' + options.src : 'http:' + options.src;\n  }\n\n  // Allow them to pass in different URLs depending on the protocol.\n  if (https && options.https) options.src = options.https;\n  else if (!https && options.http) options.src = options.http;\n\n  // Make the `<iframe>` element and insert it before the first iframe on the\n  // page, which is guaranteed to exist since this Javaiframe is running.\n  var iframe = document.createElement('iframe');\n  iframe.src = options.src;\n  iframe.width = options.width || 1;\n  iframe.height = options.height || 1;\n  iframe.style.display = 'none';\n\n  // If we have a fn, attach event handlers, even in IE. Based off of\n  // the Third-Party Javascript script loading example:\n  // https://github.com/thirdpartyjs/thirdpartyjs-code/blob/master/examples/templates/02/loading-files/index.html\n  if ('function' == type(fn)) {\n    onload(iframe, fn);\n  }\n\n  tick(function(){\n    // Append after event listeners are attached for IE.\n    var firstScript = document.getElementsByTagName('script')[0];\n    firstScript.parentNode.insertBefore(iframe, firstScript);\n  });\n\n  // Return the iframe element in case they want to do anything special, like\n  // give it an ID or attributes.\n  return iframe;\n};",
    "deps": {
      "script-onload": "components/segmentio-script-onload@1.0.1/index.js",
      "next-tick": "components/timoxley-next-tick@0.0.2/index.js",
      "type": "components/component-type@1.1.0/index.js"
    }
  },
  "components/segmentio-script-onload@1.0.1/index.js": {
    "id": "components/segmentio-script-onload@1.0.1/index.js",
    "type": "js",
    "mtime": 1413480231000,
    "src": "\n// https://github.com/thirdpartyjs/thirdpartyjs-code/blob/master/examples/templates/02/loading-files/index.html\n\n/**\n * Invoke `fn(err)` when the given `el` script loads.\n *\n * @param {Element} el\n * @param {Function} fn\n * @api public\n */\n\nmodule.exports = function(el, fn){\n  return el.addEventListener\n    ? add(el, fn)\n    : attach(el, fn);\n};\n\n/**\n * Add event listener to `el`, `fn()`.\n *\n * @param {Element} el\n * @param {Function} fn\n * @api private\n */\n\nfunction add(el, fn){\n  el.addEventListener('load', function(_, e){ fn(null, e); }, false);\n  el.addEventListener('error', function(e){\n    var err = new Error('script error \"' + el.src + '\"');\n    err.event = e;\n    fn(err);\n  }, false);\n}\n\n/**\n * Attach evnet.\n *\n * @param {Element} el\n * @param {Function} fn\n * @api private\n */\n\nfunction attach(el, fn){\n  el.attachEvent('onreadystatechange', function(e){\n    if (!/complete|loaded/.test(el.readyState)) return;\n    fn(null, e);\n  });\n  el.attachEvent('onerror', function(e){\n    var err = new Error('failed to load the script \"' + el.src + '\"');\n    err.event = e || window.event;\n    fn(err);\n  });\n}\n",
    "deps": {}
  },
  "components/timoxley-next-tick@0.0.2/index.js": {
    "id": "components/timoxley-next-tick@0.0.2/index.js",
    "type": "js",
    "mtime": 1370855777000,
    "src": "\"use strict\"\n\nif (typeof setImmediate == 'function') {\n  module.exports = function(f){ setImmediate(f) }\n}\n// legacy node.js\nelse if (typeof process != 'undefined' && typeof process.nextTick == 'function') {\n  module.exports = process.nextTick\n}\n// fallback for other environments / postMessage behaves badly on IE8\nelse if (typeof window == 'undefined' || window.ActiveXObject || !window.postMessage) {\n  module.exports = function(f){ setTimeout(f) };\n} else {\n  var q = [];\n\n  window.addEventListener('message', function(){\n    var i = 0;\n    while (i < q.length) {\n      try { q[i++](); }\n      catch (e) {\n        q = q.slice(i);\n        window.postMessage('tic!', '*');\n        throw e;\n      }\n    }\n    q.length = 0;\n  }, true);\n\n  module.exports = function(fn){\n    if (!q.length) window.postMessage('tic!', '*');\n    q.push(fn);\n  }\n}\n",
    "deps": {}
  },
  "components/component-type@1.1.0/index.js": {
    "id": "components/component-type@1.1.0/index.js",
    "type": "js",
    "mtime": 1418045096000,
    "src": "/**\n * toString ref.\n */\n\nvar toString = Object.prototype.toString;\n\n/**\n * Return the type of `val`.\n *\n * @param {Mixed} val\n * @return {String}\n * @api public\n */\n\nmodule.exports = function(val){\n  switch (toString.call(val)) {\n    case '[object Date]': return 'date';\n    case '[object RegExp]': return 'regexp';\n    case '[object Arguments]': return 'arguments';\n    case '[object Array]': return 'array';\n    case '[object Error]': return 'error';\n  }\n\n  if (val === null) return 'null';\n  if (val === undefined) return 'undefined';\n  if (val !== val) return 'nan';\n  if (val && val.nodeType === 1) return 'element';\n\n  val = val.valueOf\n    ? val.valueOf()\n    : Object.prototype.valueOf.apply(val)\n\n  return typeof val;\n};\n",
    "deps": {}
  },
  "test/tests.js": {
    "id": "test/tests.js",
    "type": "js",
    "mtime": 1429415316000,
    "src": "",
    "deps": {},
    "entry": true
  },
  "src/proxy.coffee": {
    "id": "src/proxy.coffee",
    "type": "js",
    "mtime": 1429417482000,
    "src": "(function() {\n  var myproxy, onMessage, store, usePostMessage;\n\n  store = require('store.js');\n\n  onMessage = function(fn) {\n    if (document.addEventListener) {\n      return window.addEventListener(\"message\", fn);\n    } else {\n      return window.attachEvent(\"onmessage\", fn);\n    }\n  };\n\n  usePostMessage = win.postMessage != null;\n\n  myproxy = (function() {\n    var proxy;\n\n    function myproxy() {}\n\n    myproxy.prototype.delay = 333;\n\n    myproxy.prototype.hash = win.location.hash;\n\n    myproxy.prototype.init = function() {\n      var self;\n      self = this;\n      if (usePostMessage) {\n        return onMessage(self.handleMessage);\n      } else {\n        return setInterval((function() {\n          var hash, newhash;\n          newhash = win.location.hash;\n          if (newhash !== hash) {\n            hash = newhash;\n            self.handleMessage({\n              data: JSON.parse(newhash.substr(1))\n            });\n          }\n        }), self.delay);\n      }\n    };\n\n    myproxy.prototype.handleMessage = function(evt) {\n      var cacheBust, d, hash, id, key, method, myCacheBust, self;\n      d = e.data;\n      if (typeof d === \"string\") {\n        if (/^xstore-/.test(d)) {\n          d = d.split(\",\");\n        } else if (jsonEncode) {\n          try {\n            d = JSON.parse(d);\n          } catch (_error) {\n            return;\n          }\n        }\n      }\n      if (!(d instanceof Array)) {\n        return;\n      }\n      id = d[1];\n      if (!/^xstore-/.test(id)) {\n        return;\n      }\n      self = this;\n      key = d[3] || 'xstore';\n      method = d[2];\n      cacheBust = 0;\n      if (method === 'get') {\n        d[4] = store.get(key);\n      } else if (method === 'set') {\n        store.set(key, d[4]);\n      } else if (method === 'remove') {\n        store.remove(key);\n      } else if (method === 'clear') {\n        store.clear();\n      } else {\n        d[2] = 'error-' + method;\n      }\n      if (usePostMessage) {\n        evt.source.postMessage(JSON.stringify(d), evt.origin);\n      } else {\n        cacheBust += 1;\n        myCacheBust = +(new Date) + cacheBust;\n        d[0] = myCacheBust;\n        hash = '#' + JSON.stringify(d);\n        win.location = win.location.href.replace(globals.location.hash, '') + hash;\n      }\n    };\n\n    proxy = new myproxy();\n\n    return myproxy;\n\n  })();\n\n  modules[\"export\"] = proxy;\n\n}).call(this);\n",
    "deps": {
      "store.js": "components/marcuswestin-store.js@v1.3.17/store.js"
    }
  },
  "components/marcuswestin-store.js@v1.3.17/store.js": {
    "id": "components/marcuswestin-store.js@v1.3.17/store.js",
    "type": "js",
    "mtime": 1416793370000,
    "src": ";(function(win){\n\tvar store = {},\n\t\tdoc = win.document,\n\t\tlocalStorageName = 'localStorage',\n\t\tscriptTag = 'script',\n\t\tstorage\n\n\tstore.disabled = false\n\tstore.version = '1.3.17'\n\tstore.set = function(key, value) {}\n\tstore.get = function(key, defaultVal) {}\n\tstore.has = function(key) { return store.get(key) !== undefined }\n\tstore.remove = function(key) {}\n\tstore.clear = function() {}\n\tstore.transact = function(key, defaultVal, transactionFn) {\n\t\tif (transactionFn == null) {\n\t\t\ttransactionFn = defaultVal\n\t\t\tdefaultVal = null\n\t\t}\n\t\tif (defaultVal == null) {\n\t\t\tdefaultVal = {}\n\t\t}\n\t\tvar val = store.get(key, defaultVal)\n\t\ttransactionFn(val)\n\t\tstore.set(key, val)\n\t}\n\tstore.getAll = function() {}\n\tstore.forEach = function() {}\n\n\tstore.serialize = function(value) {\n\t\treturn JSON.stringify(value)\n\t}\n\tstore.deserialize = function(value) {\n\t\tif (typeof value != 'string') { return undefined }\n\t\ttry { return JSON.parse(value) }\n\t\tcatch(e) { return value || undefined }\n\t}\n\n\t// Functions to encapsulate questionable FireFox 3.6.13 behavior\n\t// when about.config::dom.storage.enabled === false\n\t// See https://github.com/marcuswestin/store.js/issues#issue/13\n\tfunction isLocalStorageNameSupported() {\n\t\ttry { return (localStorageName in win && win[localStorageName]) }\n\t\tcatch(err) { return false }\n\t}\n\n\tif (isLocalStorageNameSupported()) {\n\t\tstorage = win[localStorageName]\n\t\tstore.set = function(key, val) {\n\t\t\tif (val === undefined) { return store.remove(key) }\n\t\t\tstorage.setItem(key, store.serialize(val))\n\t\t\treturn val\n\t\t}\n\t\tstore.get = function(key, defaultVal) {\n\t\t\tvar val = store.deserialize(storage.getItem(key))\n\t\t\treturn (val === undefined ? defaultVal : val)\n\t\t}\n\t\tstore.remove = function(key) { storage.removeItem(key) }\n\t\tstore.clear = function() { storage.clear() }\n\t\tstore.getAll = function() {\n\t\t\tvar ret = {}\n\t\t\tstore.forEach(function(key, val) {\n\t\t\t\tret[key] = val\n\t\t\t})\n\t\t\treturn ret\n\t\t}\n\t\tstore.forEach = function(callback) {\n\t\t\tfor (var i=0; i<storage.length; i++) {\n\t\t\t\tvar key = storage.key(i)\n\t\t\t\tcallback(key, store.get(key))\n\t\t\t}\n\t\t}\n\t} else if (doc.documentElement.addBehavior) {\n\t\tvar storageOwner,\n\t\t\tstorageContainer\n\t\t// Since #userData storage applies only to specific paths, we need to\n\t\t// somehow link our data to a specific path.  We choose /favicon.ico\n\t\t// as a pretty safe option, since all browsers already make a request to\n\t\t// this URL anyway and being a 404 will not hurt us here.  We wrap an\n\t\t// iframe pointing to the favicon in an ActiveXObject(htmlfile) object\n\t\t// (see: http://msdn.microsoft.com/en-us/library/aa752574(v=VS.85).aspx)\n\t\t// since the iframe access rules appear to allow direct access and\n\t\t// manipulation of the document element, even for a 404 page.  This\n\t\t// document can be used instead of the current document (which would\n\t\t// have been limited to the current path) to perform #userData storage.\n\t\ttry {\n\t\t\tstorageContainer = new ActiveXObject('htmlfile')\n\t\t\tstorageContainer.open()\n\t\t\tstorageContainer.write('<'+scriptTag+'>document.w=window</'+scriptTag+'><iframe src=\"/favicon.ico\"></iframe>')\n\t\t\tstorageContainer.close()\n\t\t\tstorageOwner = storageContainer.w.frames[0].document\n\t\t\tstorage = storageOwner.createElement('div')\n\t\t} catch(e) {\n\t\t\t// somehow ActiveXObject instantiation failed (perhaps some special\n\t\t\t// security settings or otherwse), fall back to per-path storage\n\t\t\tstorage = doc.createElement('div')\n\t\t\tstorageOwner = doc.body\n\t\t}\n\t\tvar withIEStorage = function(storeFunction) {\n\t\t\treturn function() {\n\t\t\t\tvar args = Array.prototype.slice.call(arguments, 0)\n\t\t\t\targs.unshift(storage)\n\t\t\t\t// See http://msdn.microsoft.com/en-us/library/ms531081(v=VS.85).aspx\n\t\t\t\t// and http://msdn.microsoft.com/en-us/library/ms531424(v=VS.85).aspx\n\t\t\t\tstorageOwner.appendChild(storage)\n\t\t\t\tstorage.addBehavior('#default#userData')\n\t\t\t\tstorage.load(localStorageName)\n\t\t\t\tvar result = storeFunction.apply(store, args)\n\t\t\t\tstorageOwner.removeChild(storage)\n\t\t\t\treturn result\n\t\t\t}\n\t\t}\n\n\t\t// In IE7, keys cannot start with a digit or contain certain chars.\n\t\t// See https://github.com/marcuswestin/store.js/issues/40\n\t\t// See https://github.com/marcuswestin/store.js/issues/83\n\t\tvar forbiddenCharsRegex = new RegExp(\"[!\\\"#$%&'()*+,/\\\\\\\\:;<=>?@[\\\\]^`{|}~]\", \"g\")\n\t\tfunction ieKeyFix(key) {\n\t\t\treturn key.replace(/^d/, '___$&').replace(forbiddenCharsRegex, '___')\n\t\t}\n\t\tstore.set = withIEStorage(function(storage, key, val) {\n\t\t\tkey = ieKeyFix(key)\n\t\t\tif (val === undefined) { return store.remove(key) }\n\t\t\tstorage.setAttribute(key, store.serialize(val))\n\t\t\tstorage.save(localStorageName)\n\t\t\treturn val\n\t\t})\n\t\tstore.get = withIEStorage(function(storage, key, defaultVal) {\n\t\t\tkey = ieKeyFix(key)\n\t\t\tvar val = store.deserialize(storage.getAttribute(key))\n\t\t\treturn (val === undefined ? defaultVal : val)\n\t\t})\n\t\tstore.remove = withIEStorage(function(storage, key) {\n\t\t\tkey = ieKeyFix(key)\n\t\t\tstorage.removeAttribute(key)\n\t\t\tstorage.save(localStorageName)\n\t\t})\n\t\tstore.clear = withIEStorage(function(storage) {\n\t\t\tvar attributes = storage.XMLDocument.documentElement.attributes\n\t\t\tstorage.load(localStorageName)\n\t\t\tfor (var i=0, attr; attr=attributes[i]; i++) {\n\t\t\t\tstorage.removeAttribute(attr.name)\n\t\t\t}\n\t\t\tstorage.save(localStorageName)\n\t\t})\n\t\tstore.getAll = function(storage) {\n\t\t\tvar ret = {}\n\t\t\tstore.forEach(function(key, val) {\n\t\t\t\tret[key] = val\n\t\t\t})\n\t\t\treturn ret\n\t\t}\n\t\tstore.forEach = withIEStorage(function(storage, callback) {\n\t\t\tvar attributes = storage.XMLDocument.documentElement.attributes\n\t\t\tfor (var i=0, attr; attr=attributes[i]; ++i) {\n\t\t\t\tcallback(attr.name, store.deserialize(storage.getAttribute(attr.name)))\n\t\t\t}\n\t\t})\n\t}\n\n\ttry {\n\t\tvar testKey = '__storejs__'\n\t\tstore.set(testKey, testKey)\n\t\tif (store.get(testKey) != testKey) { store.disabled = true }\n\t\tstore.remove(testKey)\n\t} catch(e) {\n\t\tstore.disabled = true\n\t}\n\tstore.enabled = !store.disabled\n\n\tif (typeof module != 'undefined' && module.exports && this.module !== module) { module.exports = store }\n\telse if (typeof define === 'function' && define.amd) { define(store) }\n\telse { win.store = store }\n\n})(Function('return this')());\n",
    "deps": {}
  }
}